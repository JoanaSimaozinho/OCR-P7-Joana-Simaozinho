import { Node } from "../html/ast";
import { StringRange } from "../base/ast";
import { EngineErrorKind, GraphErrorInfo } from "./errors";
import { EvaluatedData, DiffedData, LoadedData, SheetInfo } from "../html/virt";
export declare enum EngineDelegateEventKind {
    Loading = "Loading",
    Deleted = "Deleted",
    Loaded = "Loaded",
    Updating = "Updating",
    Evaluated = "Evaluated",
    Error = "Error",
    NodeParsed = "NodeParsed",
    Diffed = "Diffed",
    ChangedSheets = "ChangedSheets"
}
declare type BaseEngineDelegateEvent<KKind extends EngineDelegateEventKind> = {
    kind: KKind;
};
export declare type EvaluatedEvent = {
    uri: string;
    data: EvaluatedData;
} & BaseEngineDelegateEvent<EngineDelegateEventKind.Evaluated>;
export declare type DeletedEvent = {
    uri: string;
} & BaseEngineDelegateEvent<EngineDelegateEventKind.Deleted>;
export declare type DiffedEvent = {
    uri: string;
    data: DiffedData;
} & BaseEngineDelegateEvent<EngineDelegateEventKind.Diffed>;
export declare type NodeParsedEvent = {
    uri: string;
    node?: Node;
} & BaseEngineDelegateEvent<EngineDelegateEventKind.NodeParsed>;
export declare type ChangedSheetsData = {
    newSheets: SheetInfo[];
    removedSheetUris: string[];
    allImportedSheetUris: string[];
};
export declare type ChangedSheetsEvent = {
    uri: string;
    data: ChangedSheetsData;
} & BaseEngineDelegateEvent<EngineDelegateEventKind.ChangedSheets>;
export declare type BaseEngineErrorEvent<TErrorType extends EngineErrorKind> = {
    uri: string;
    errorKind: TErrorType;
} & BaseEngineDelegateEvent<EngineDelegateEventKind.Error>;
export declare type GraphErrorEvent = {
    info: GraphErrorInfo;
    message: string;
} & BaseEngineErrorEvent<EngineErrorKind.Graph>;
export declare type RuntimeErrorEvent = {
    uri: string;
    message: string;
    range: StringRange;
} & BaseEngineErrorEvent<EngineErrorKind.Runtime>;
export declare type LoadedEvent = {
    uri: string;
    data: LoadedData;
} & BaseEngineDelegateEvent<EngineDelegateEventKind.Loaded>;
export declare type EngineErrorEvent = GraphErrorEvent | RuntimeErrorEvent;
export declare type EngineDelegateEvent = EvaluatedEvent | EngineErrorEvent | ChangedSheetsEvent | DeletedEvent | NodeParsedEvent | LoadedEvent | DiffedEvent;
export {};
