"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.stringifyVirtualNode = void 0;
var stringify_sheet_1 = require("../css/stringify-sheet");
var html_entities_1 = require("html-entities");
var entities = new html_entities_1.Html5Entities();
var stringifyVirtualNode = function (node) {
    switch (node.kind) {
        case "Fragment":
            return stringifyChildren(node);
        case "Element": {
            var buffer = "<".concat(node.tagName);
            for (var key in node.attributes) {
                var value = node.attributes[key];
                if (value) {
                    buffer += " ".concat(key, "=\"").concat(value, "\"");
                }
                else {
                    buffer += " ".concat(key);
                }
            }
            buffer += ">".concat(stringifyChildren(node), "</").concat(node.tagName, ">");
            return buffer;
        }
        case "StyleElement": {
            return "<style>".concat((0, stringify_sheet_1.stringifyCSSSheet)(node.sheet), "</style>");
        }
        case "Text": {
            return entities.decode(node.value);
        }
        default: {
            throw new Error("can't handle ".concat(node.kind));
        }
    }
};
exports.stringifyVirtualNode = stringifyVirtualNode;
var stringifyChildren = function (node) {
    return node.children.map(exports.stringifyVirtualNode).join("");
};
